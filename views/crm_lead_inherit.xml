<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="crm_lead_custom_action" model="ir.actions.server">
        <field name="name">Fetch Bookings From Booking.com</field>
        <field name="model_id" ref="crm.model_crm_lead"/>
        <field name="binding_model_id" ref="crm.model_crm_lead"/>
        <field name="binding_view_types">form,list</field>
        <field name="state">code</field>
        <field name="code">
            action = {
                'type': 'ir.actions.act_window',
                'name': 'Fetch Bookings',
                'res_model': 'fetch.mail',
                'view_mode': 'form',
                'target': 'new',
                'context': {
                    'default_model': 'crm.lead',
                    'default_res_id': records.id,
                    # Add any other default context values you need
                },
            }
        </field>
    </record>
    <record id="inherit_Crm_lead_custom" model="ir.ui.view">
        <field name="name">CRM.Lead.Form.view</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_set_won_rainbowman']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
            <xpath expr="//button[@name='%(crm.crm_lead_lost_action)d']" position="attributes">
                <attribute name="string">Cancel</attribute>
            </xpath>
            <div name="button_box" position="inside">
                <button name="action_view_invoice" type="object" class="oe_stat_button" icon="fa-file-text-o" invisible="invoice_count == 0">
                    <field name="invoice_count" widget="statinfo" string="Invoices" />
                </button>
            </div>
            <xpath expr="//form//sheet//group//group[@name='opportunity_partner']//field[@name='lost_reason_id']" position="after">
                <field name="aadhar_id" />
                <field name="city" string="City" required="1"/>
                <field name="rate" string="Rate"/>
                <field name="customer_paid" string="Customer Paid" readonly="1"/>
                <field name="balance" string="Balance" readonly="1"/>
                <field name="payment_transaction_id" />
                <field name="payment_status" string="Payment Status"/>
            </xpath>
            <xpath expr="//form//field[@name='partner_id']" position="attributes">
                <attribute name="required">1</attribute>
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="after">
                <field name="booking_id" string="Booking ID"/>
                <field name="booking_url" string="Booking URL" invisible="booking_url == ''"/>
                <!-- <field name="today_start" invisible="1"/>
                <field name="today_end" invisible="1"/> -->
                <field name="check_in" string="Check In" required="1"/>
                <field name="check_out" string="Check Out" required="1"/>
                <field name="property_product_id" string="Property" required="1"/>
                <field name="number_of_rooms" string="Number of Rooms" />
                <field name="invioce_fully_paid" invisible="1" />
            </xpath>
        </field>
    </record>
    <record id="inherit_Crm_lead_custom_oppor" model="ir.ui.view">
        <field name="name">CRM.Lead.Form.view</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="sale_crm.crm_case_form_view_oppor"/>
        <field name="arch" type="xml">
            <xpath expr="//button[@name='action_sale_quotations_new']" position="after">
                <button name="create_invoice" type="object" class="oe_highlight" icon="fa-file-text-o"
                    string="Create Invoice" data-hotkey="i"
                    title="Create an invoice from this opportunity"
                    invisible="invioce_fully_paid"
                    />
            </xpath>
            <xpath expr="//button[@name='action_sale_quotations_new']" position="attributes">
                <attribute name="invisible">1</attribute>
            </xpath>
        </field>
    </record>
    <record id="inherit_Crm_lead_custom_tree" model="ir.ui.view">
        <field name="name">CRM.Lead.Tree.view</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_case_tree_view_oppor"/>
        <field name="arch" type="xml">
            <xpath expr="//tree//field[@name='name']" position="before">
                <field name="logo" widget="image" class="oe_avatar" options="{'preview_image': 'logo'}" string="Logo"/>
            </xpath>
            <xpath expr="//tree//field[@name='name']" position="attributes">
                <attribute name="string">Name</attribute>
            </xpath>
            <xpath expr="//tree//field[@name='name']" position="after">
                <!-- <field name="today_start" column_invisible="1" />
                <field name="today_end" column_invisible="1" /> -->
                <field name="check_in" string="Check In"/>
                <field name="check_out" string="Check Out"/>
                <field name="property_id" string="Property"/>
                <field name="booking_id" string="Booking ID"/>
                <field name="rate" string="Rate"/>
                <field name="customer_paid" string="Customer Paid" readonly="1"/>
                <field name="balance" string="Balance" readonly="1"/>
                <field name="payment_status" string="Payment Status" decoration-success="payment_status == 'paid'" decoration-danger="payment_status == 'unpaid'" decoration-info="payment_status == 'partial'" widget="badge"/>
            </xpath>
            <xpath expr="//tree//field[@name='expected_revenue']" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </xpath>
            <xpath expr="//tree//field[@name='user_id']" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </xpath>
            <xpath expr="//tree//field[@name='stage_id']" position="attributes">
                <attribute name="column_invisible">1</attribute>
            </xpath>
        </field>
    </record>
    <record id="report_lead_tree_inherit" model="ir.ui.view">
        <field name="name">crm.lead.report.tree.inherit</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_lead_view_tree_reporting"/>
        <field name="arch" type="xml">
            <xpath expr="//tree//field[@name='name']" position="attributes">
                <attribute name="string">Name</attribute>
            </xpath>
            <xpath expr="//tree//field[@name='name']" position="after">
                <field name="check_in" string="Check In"/>
                <field name="check_out" string="Check Out"/>
                <field name="property_id" string="Property"/>
                <field name="booking_id" string="Booking ID"/>
                <field name="company_id" string="Rate"/>
                <field name="payment_status" string="Payment Status" decoration-success="payment_status == 'paid'" decoration-danger="payment_status == 'unpaid'" decoration-info="payment_status == 'partial'" widget="badge"/>
            </xpath>
        </field>
    </record>
    <record id="crm_search_view_custom_leads" model="ir.ui.view">
        <field name="name">crm.lead.search.view</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.crm_opportunity_report_view_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search//filter[@name='saleschannel']" position="after">
                <filter name="check_in" date="check_in" string="Check-in" context="{'group_by': 'check_in'}" />
                <filter name="check_out" date="check_out" string="Check-out" context="{'group_by': 'check_out'}" />
            </xpath> 
        </field>
    </record>
    <record id="crm_search_view_custom_opportunity" model="ir.ui.view">
        <field name="name">crm.lead.search.view</field>
        <field name="model">crm.lead</field>
        <field name="inherit_id" ref="crm.view_crm_case_opportunities_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//search//filter[@name='saleschannel']" position="after">
                <filter name="check_in" date="check_in" string="Check-in" context="{'group_by': 'check_in'}" />
                <filter name="check_out" date="check_out" string="Check-out" context="{'group_by': 'check_out'}" />
            </xpath> 
        </field>
    </record>
    <record id="product_template_inherit_property" model="ir.ui.view">
        <field name="name">product.template.inherit.property</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//form//sheet//field[@name='invoice_policy']" position="after">
                <field name="property_location" string="Property Location"/>
                <field name="property_address" string="Property Address"/>
                <field name="number_of_rooms" />
                <field name="agoda_property_id" />
                <field name="booking_dot_com_property_id" />
                <field name="make_my_trip_property_id" />
            </xpath>
        </field>
    </record>
</odoo>